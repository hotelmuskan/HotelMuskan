<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hotel Muskan POS</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --gold: #d4af37; --dark: #0a0a0a; --card: #161616; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--dark); color: white; margin: 0; padding-bottom: 70px; }
        
        /* Header */
        .header { text-align: center; padding: 20px; border-bottom: 2px solid var(--gold); background: #000; }
        .header h1 { margin: 0; color: var(--gold); letter-spacing: 2px; font-size: 24px; }
        .header p { margin: 5px 0 0; font-size: 10px; color: #888; }

        /* Tabs */
        .tab-btn-container { display: flex; background: #111; position: sticky; top: 0; z-index: 10; border-bottom: 1px solid #333; }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; color: #888; cursor: pointer; font-weight: bold; }
        .tab-btn.active { color: var(--gold); border-bottom: 3px solid var(--gold); }

        .page { display: none; padding: 15px; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Menu Grid */
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .menu-item { background: var(--card); border: 1px solid #333; padding: 12px; border-radius: 12px; text-align: center; }
        .menu-item b { display: block; font-size: 13px; margin-bottom: 5px; min-height: 32px; }
        .btn-group { display: flex; gap: 5px; }
        .btn-sm { flex: 1; padding: 8px 0; font-size: 10px; border: 1px solid var(--gold); background: none; color: var(--gold); border-radius: 5px; font-weight: bold; cursor: pointer; }
        .btn-sm:active { background: var(--gold); color: black; }

        /* Invoice */
        .invoice-box { background: white; color: black; padding: 20px; border-radius: 5px; margin-top: 10px; }
        .bill-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #ddd; font-size: 14px; }
        .total-row { display: flex; justify-content: space-between; font-weight: bold; font-size: 20px; margin-top: 15px; padding-top: 10px; border-top: 2px solid #000; }
        
        /* Inputs */
        .input-field { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: 1px solid #333; background: #1a1a1a; color: white; box-sizing: border-box; }

        /* Buttons */
        .action-btn { width: 100%; padding: 15px; border-radius: 10px; border: none; font-weight: bold; margin-top: 10px; cursor: pointer; }
        .bg-gold { background: var(--gold); color: black; }
        .bg-wa { background: #25D366; color: white; }

        #qrcode { margin: 15px auto; width: 150px; height: 150px; background: white; padding: 10px; }

        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black; }
            .invoice-box { border: none; width: 100%; }
        }
    </style>
</head>
<body>

<div class="header">
    <h1>HOTEL MUSKAN</h1>
    <p>A taste you'll remember | Bhagwanpur Overbridge</p>
</div>

<div class="tab-btn-container no-print">
    <button class="tab-btn active" onclick="showPage('menu', this)">MENU</button>
    <button class="tab-btn" onclick="showPage('bill', this)">BILL</button>
    <button class="tab-btn" onclick="showPage('admin', this)">ADMIN</button>
</div>

<div id="menu" class="page active no-print">
    <div class="menu-grid" id="menu-container"></div>
</div>

<div id="bill" class="page">
    <div class="no-print">
        <input type="text" id="cust-name" class="input-field" placeholder="Customer Name">
        <input type="number" id="cust-phone" class="input-field" placeholder="WhatsApp Number">
    </div>

    <div class="invoice-box" id="print-area">
        <div style="text-align: center;">
            <h2 style="margin:0;">HOTEL MUSKAN</h2>
            <small>Bhagwanpur Overbridge, Near Overbridge</small><br>
            <small id="bill-date"></small>
        </div>
        <hr>
        <div id="bill-items-list"></div>
        <div class="total-row">
            <span>TOTAL</span>
            <span id="grand-total">â‚¹0</span>
        </div>
        <div id="qrcode"></div>
        <div style="text-align: center; font-size: 10px; font-weight: bold; margin-top: 10px;">
            A taste you'll remember - Scan to Pay
        </div>
    </div>

    <div class="no-print">
        <button class="action-btn bg-gold" onclick="printBill()">PRINT BILL</button>
        <button class="action-btn bg-wa" onclick="whatsappBill()">WHATSAPP BILL</button>
    </div>
</div>

<div id="admin" class="page no-print">
    <h3>Table Management</h3>
    <div id="table-selection" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;"></div>
    <div style="margin-top: 30px; background: #111; padding: 20px; border-radius: 10px; border: 1px solid var(--gold);">
        <p>Today's Total Revenue</p>
        <h2 id="revenue-total" style="color: var(--gold); margin:0;">â‚¹0</h2>
    </div>
</div>

<script>
    const upiID = "ajaykumar2569563@ybl";
    let currentTable = 1;
    let shiftRevenue = 0;
    let tables = {1:[], 2:[], 3:[], 4:[], 5:[], 6:[]};

    const menuData = [
      "ðŸ«“ Breads": [
            { name: "Plain Roti", price: 7 }, { name: "Butter Roti", price: 10 },
            { name: "Tandoori Roti", price: 10 }, { name: "Plain Naan", price: 25 },
            { name: "Butter Naan", price: 30 }, { name: "Garlic Naan", price: 40 }
        ],
        "ðŸš Rice & Biryani": [
            { name: "Plain Rice", price: 70, half: 40 }, { name: "Jeera Rice", price: 70, half: 40 },
            { name: "Veg Biryani", price: 120, half: 70 }, { name: "Chicken Biryani", price: 160, half: 90 },
            { name: "Mutton Biryani", price: 220, half: 120 }
        ],
        "ðŸ¥¦ Veg Main": [
            { name: "Dal Fry", price: 140, half: 70 }, { name: "Dal Tadka", price: 140, half: 70 },
            { name: "Paneer Butter Masala", price: 140, half: 80 }, { name: "Mix Veg", price: 100, half: 60 }
        ],
        "ðŸ— Non-Veg Main": [
            { name: "Chicken Curry", price: 140, half: 80 }, { name: "Chicken Butter Masala", price: 160, half: 90 },
            { name: "Mutton Curry", price: 220, half: 120 }
        ],
        "ðŸŸ Starters": [
            { name: "Veg Manchurian", price: 120, half: 70 }, { name: "Chicken Chilli", price: 150, half: 90 }
        ],
        "ðŸ¥¤ Beverages": [
            { name: "Mineral Water", price: 20 }, { name: "Tea", price: 15 }, { name: "Cold Drink", price: 40 }
        ]
    ];

    function showPage(pageId, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        btn.classList.add('active');
        if(pageId === 'bill') renderBill();
    }

    function init() {
        const container = document.getElementById('menu-container');
        menuData.forEach((item, index) => {
            let buttons = `<button class="btn-sm" onclick="add('${item.name}', ${item.price})">FULL (â‚¹${item.price})</button>`;
            if(item.half) {
                buttons = `<button class="btn-sm" onclick="add('${item.name} (H)', ${item.half})">HALF (â‚¹${item.half})</button>` + buttons;
            }
            container.innerHTML += `<div class="menu-item"><b>${item.name}</b><div class="btn-group">${buttons}</div></div>`;
        });
        renderTables();
    }

    function add(name, price) {
        tables[currentTable].push({ name, price });
        alert(name + " added to Table " + currentTable);
    }

    function renderBill() {
        const list = document.getElementById('bill-items-list');
        const totalEl = document.getElementById('grand-total');
        const dateEl = document.getElementById('bill-date');
        list.innerHTML = '';
        let total = 0;

        // Grouping items to show quantity
        let counts = {};
        tables[currentTable].forEach(item => {
            counts[item.name] = (counts[item.name] || { qty: 0, price: item.price });
            counts[item.name].qty++;
        });

        for (let name in counts) {
            let itemTotal = counts[name].qty * counts[name].price;
            total += itemTotal;
            list.innerHTML += `<div class="bill-row"><span>${counts[name].qty} x ${name}</span><span>â‚¹${itemTotal}</span></div>`;
        }

        totalEl.innerText = 'â‚¹' + total;
        dateEl.innerText = new Date().toLocaleString();

        const qrContainer = document.getElementById("qrcode");
        qrContainer.innerHTML = "";
        if(total > 0) {
            new QRCode(qrContainer, { text: `upi://pay?pa=${upiID}&am=${total}&cu=INR`, width: 128, height: 128 });
        }
    }

    function renderTables() {
        const container = document.getElementById('table-selection');
        container.innerHTML = '';
        for(let i=1; i<=6; i++) {
            container.innerHTML += `<button class="tab-btn" style="background:#222; margin:5px; border-radius:10px; color:${i==currentTable?'var(--gold)':'white'}" onclick="setTable(${i})">Table ${i}</button>`;
        }
    }

    function setTable(n) {
        currentTable = n;
        renderTables();
        alert("Switched to Table " + n);
    }

    function whatsappBill() {
        const phone = document.getElementById('cust-phone').value;
        if(!phone) return alert("Please enter phone number");
        let text = `*HOTEL MUSKAN*%0A------------------%0A`;
        let total = 0;
        tables[currentTable].forEach(i => {
            text += `${i.name} - â‚¹${i.price}%0A`;
            total += i.price;
        });
        text += `------------------%0A*Total: â‚¹${total}*%0A_A taste you'll remember_`;
        window.open(`https://wa.me/91${phone}?text=${text}`);
    }

    function printBill() {
        const total = parseInt(document.getElementById('grand-total').innerText.replace('â‚¹',''));
        shiftRevenue += total;
        document.getElementById('revenue-total').innerText = 'â‚¹' + shiftRevenue;
        window.print();
        tables[currentTable] = [];
        renderBill();
    }

    init();
</script>
</body>
</html>
